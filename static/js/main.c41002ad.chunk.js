(this.webpackJsonpbattleboats=this.webpackJsonpbattleboats||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),o=n.n(i),s=n(7),r=n.n(s),c=n(2),u=(n(15),n(16),n(3)),l=n(8),d=function e(t,n){var a=this;Object(u.a)(this,e),this.handleHit=function(){return a.hitsLeft--,0===a.hitsLeft?(a.isSunk=!0,a):a},this.name=t,this.hitsLeft=n,this.isSunk=!1,this.length=n,this.hit=function(){return a.handleHit()}},h=function(){function e(t){var n=this;Object(u.a)(this,e),this.checkSpace=function(e){var t=n.board.slice(),a=t[e[0]][e[1]];return n.board=t,null===a?(t[e[0]][e[1]]="~",{isHit:!1,isSunk:!1,message:"you missed",newBoard:t}):n.attackBoat(a,t,e)},this.attackBoat=function(e,t){var a=e.boat.hit();return e.isHit=!0,!0===a.isSunk&&(t=n.sinkShip(e,t)),n.board=t,{isHit:!0,isSunk:a.isSunk,response:a,newBoard:t,boat:e.boat}},this.sinkShip=function(e,t){return n.shipsLeft-=1,t.map((function(t){return t.map((function(t){if(null!==t&&t.boat===e.boat)return t.isSunk=!0}))})),t},this.boats=[{name:"Carrier",quantity:1,size:5},{name:"Battleboat",quantity:2,size:4},{name:"Destroyer",quantity:3,size:3},{name:"Submarine",quantity:4,size:2}],this.create=function(){for(var e=[],t=0;t<10;t++){e.push([]);for(var n=0;n<10;n++)e[t][n]=null}return e},this.generateRandomBoats=function(){n.random=!0,n.boats.forEach((function(e){for(var t=0;t<e.quantity;t++){var a=new d(e.name,e.size);n.findSpaces(e.size,a)}}))},this.findSpaces=function(e,t){var a=Math.floor(2*Math.random()),i=n.generateRandomSpace(e,a),o=n.attemptPlacingBoat(e,i,a);o?n.updateBoard(o,t):n.findSpaces(e,t)},this.generateRandomSpace=function(e,t){var a=n.getCoords(e,t);return null===n.board[a[0]][a[1]]?a:n.generateRandomSpace(e,t)},this.getCoords=function(e,t){return 1===t?[n.getRandomInt(0,9),n.getRandomInt(0,e)]:[n.getRandomInt(0,e),n.getRandomInt(0,9)]},this.attemptPlacingBoat=function(e,t,a){var i=n.makeBoatData(e,t,a),o=n.random?n.makeRandomBoatData(e,t,a):i;return!n.anyCoordsOutside(i)&&(!n.checkCoordArray(o)&&i)},this.makeBoatData=function(e,t,n){var a=[];if(1===n)for(var i=t[1];i<t[1]+e;i++)a.push([t[0],i]);else for(var o=t[0];o<t[0]+e;o++)a.push([o,t[1]]);return a},this.makeRandomBoatData=function(e,t,a){var i=[];if(1===a)for(var o=t[1]-1;o<t[1]+(e+1);o++)n.coordExists([t[0],o])&&i.push([t[0],o]);else for(var s=t[0]-1;s<t[0]+(e+1);s++)n.coordExists([s,t[1]])&&i.push([s,t[1]]);return i},this.anyCoordsOutside=function(e){return e.some((function(e){return!n.coordExists(e)}))},this.coordExists=function(e){return e[0]<10&&e[0]>=0&&e[1]<10&&e[1]>=0},this.checkCoordArray=function(e){var t=[];return e.forEach((function(e){t.push(n.board[e[0]][e[1]])})),t.some((function(e){return null!==e}))},this.updateBoard=function(e,t){var a=n.board.slice();e.forEach((function(e){var n={isHit:!1,isSunk:!1,boat:t};a[e[0]][e[1]]=n})),n.board=a},this.board=t||this.create(),this.receiveAttack=function(e){return n.checkSpace(e)},this.shipsLeft=10,this.random=!1}return Object(l.a)(e,[{key:"getRandomInt",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}]),e}(),f=function e(t){var n=this;Object(u.a)(this,e),this.userMakeMove=function(e){var t={coords:e};return n.verifyMoveIsLegal(t)?n.makeMoveOnBoard(e):void 0},this.makeChoiceArray=function(){for(var e=[],t=0;t<10;t++)for(var n=0;n<10;n++)e.push({x:t,y:n});return e},this.makeSmartChoiceArray=function(){for(var e=[0],t=0;t<100;){for(var n=0;n<4;n++)t+=2,e.push(t);t+=t%2===0?3:1,e.push(t)}return e},this.makeSmartChoices=function(){var e=n.makeSmartChoiceArray(),t=[];return e.forEach((function(e){return t.push(n.choicesLeft[e])})),t=t.slice(0,50)},this.compMakeMove=function(){if(n.lastMove){var e=n.assessLastMove(),t=n.makeMoveOnBoard(e.coords);return n.logMove(e,t),t}return n.makeRandomMove()},this.makeRandomMove=function(){var e=n.makeRandomChoice(),t=n.makeMoveOnBoard(e.coords);return n.logMove(e,t),t},this.makeRandomChoice=function(){var e=Math.floor(Math.random()*n.smartChoices.length);return{coords:[n.smartChoices[e].x,n.smartChoices[e].y]}},this.filterChoices=function(e,t){var n=t.slice(),a=n.find((function(t){return t.x===e[0]&&t.y===e[1]}));return n=n.filter((function(e){return e!==a}))},this.makeMoveOnBoard=function(e){return n.choicesLeft=n.filterChoices(e,n.choicesLeft),n.smartChoices=n.filterChoices(e,n.smartChoices),n.enemyGameBoard.receiveAttack(e)},this.logMove=function(e,t){var a=e.coords,i=e.direction,o=e.prevMoves,s=e.continueAttack,r=t.isHit,c=t.isSunk,u=t.boat;n.lastMove={coords:a,isHit:r,isSunk:c,direction:i,prevMoves:o,boat:u,continueAttack:s},n.lastMove.isHit&&!n.lastMove.isSunk&&n.hits.push(n.lastMove),n.lastMove.isSunk&&n.filterHits()},this.assessLastMove=function(){return n.lastMove.isHit&&!n.lastMove.isSunk?n.lastMove.direction?n.continueAttack():n.plotNextMove():n.lastMove.continueAttack&&!n.lastMove.isSunk?n.attemptReverse(n.lastMove):n.lastMove.prevMoves&&!n.lastMove.isSunk?n.determineAndFilter(n.lastMove.prevMoves):n.hits.length>0?n.useHitsArray():n.makeRandomChoice()},this.useHitsArray=function(){n.lastMove=n.hits[0];var e=n.makeNextMoves(n.lastMove.coords),t=n.filterNextMoves(e);return t.length>0?(n.filterHits(),n.determineAndFilter(t)):(n.filterHits(),n.hits.length>0?n.useHitsArray():n.makeRandomChoice())},this.determineAndFilter=function(e){if(e.length>1){var t=e[Math.floor(Math.random()*e.length)],n=e.filter((function(e){return e!==t}));return{coords:t.coords,direction:t.direction,prevMoves:n}}return{coords:e[0].coords,direction:e[0].direction,prevMoves:""}},this.continueAttack=function(){var e=n.determineNextAttack(n.lastMove.coords);return n.verifyMoveIsLegal(e)?e:n.attemptReverse(n.lastMove)},this.attemptReverse=function(e){var t=n.reverseDirection(e.direction),a=e.prevMoves?e.prevMoves.find((function(e){return e.direction===t})):"";return n.verifyMoveIsLegal(a)?a:n.hits.length>0?n.useHitsArray():n.makeRandomChoice()},this.reverseDirection=function(e){return"north"===e?"south":"south"===e?"north":"east"===e?"west":"east"},this.verifyReverse=function(e){},this.determineNextAttack=function(e){return{coords:"north"===n.lastMove.direction?[e[0],e[1]-1]:"east"===n.lastMove.direction?[e[0]+1,e[1]]:"south"===n.lastMove.direction?[e[0],e[1]+1]:[e[0]-1,e[1]],direction:n.lastMove.direction,prevMoves:n.lastMove.prevMoves,continueAttack:!0}},this.verifyMoveIsLegal=function(e){return!!e&&n.choicesLeft.some((function(t){return t.x===e.coords[0]&&t.y===e.coords[1]}))},this.plotNextMove=function(){var e=n.makeNextMoves(n.lastMove.coords),t=n.filterNextMoves(e);return t.length>0?n.determineAndFilter(t):n.makeRandomChoice()},this.makeNextMoves=function(e){return[{coords:[e[0],e[1]-1],direction:"north"},{coords:[e[0]-1,e[1]],direction:"west"},{coords:[e[0],e[1]+1],direction:"south"},{coords:[e[0]+1,e[1]],direction:"east"}]},this.filterNextMoves=function(e){var t=[];return e.forEach((function(e){n.verifyMoveIsLegal(e)&&t.push(e)})),t},this.filterHits=function(){n.hits=n.hits.filter((function(e){return!e.boat.isSunk}))},this.enemyGameBoard=t,this.choicesLeft=this.makeChoiceArray(),this.smartChoices=this.makeSmartChoices(),this.lastMove={},this.hits=[]},m=function e(t){var n=this;Object(u.a)(this,e),this.userTurn=function(e){var t=n.playerOne.userMakeMove(e);return t?(t.win=n.checkWin(n.playerOne),t):void 0},this.compTurn=function(){var e=n.playerTwo.compMakeMove();return e.win=n.checkWin(n.playerTwo),e},this.checkWin=function(e){return 0===e.enemyGameBoard.shipsLeft},this.createPlayer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=new h(t);return""===t&&n.generateRandomBoats(),new f(n,e)},this.playerOne=this.createPlayer(!1),this.playerTwo=this.createPlayer(!0,t)},v=(n(17),function(e){return Object(a.jsxs)("div",{className:"Your Boats"===e.title?"your-info":"pc-info",children:[Object(a.jsx)("h2",{className:"info-title",children:e.title}),Object(a.jsxs)("h2",{className:"info-ship-count",children:["Ships Left: ",e.shipsLeft]})]})}),b=function(e){var t={colInfo:["",1,2,3,4,5,6,7,8,9,10],rowInfo:["","A","B","C","D","E","F","G","H","I","J"]},n=function(t){var n=u(t);e.handleEdit(e.board[n[0]][n[1]])},i=function(t){var n=u(t);e.handleInput(n)},o=function(t){return null!==t?t.isSunk?"is-sunk":"~"===t?"board-miss":t.isHit?"board-hit":e.handleInput?"your-square":"your-ship":e.handleInput?"your-square":"board-square"},s=function(e){if(null!==e){if(e.isSunk||e.isHit)return"X";if("~"===e)return"~"}},r=function(e){e.preventDefault()},c=function(t){t.preventDefault();var n=u(t);e.sendCoord(n)},u=function(e){var t=e.target.attributes[0].value.split(",");return t=t.map((function(e){return parseInt(e)}))};return Object(a.jsxs)("div",{className:e.active?"active":"inactive",children:[Object(a.jsxs)("div",{className:"gameboard-container",children:[Object(a.jsx)("div",{className:"gameboard-col-info",children:t.rowInfo.map((function(e,t){return Object(a.jsx)("div",{className:"info-square",children:e},t)}))}),Object(a.jsx)("div",{className:"gameboard-row-info",children:t.colInfo.map((function(e,t){return Object(a.jsx)("div",{className:"info-square",children:e},t)}))}),Object(a.jsx)("div",{className:"gameboard",children:e.board.map((function(t,u){return Object(a.jsx)("div",{className:"gameboard-column",children:t.map((function(t,l){return Object(a.jsx)("div",{data:[u,l],className:o(t),onClick:e.handleInput?i:e.handleEdit?n:null,onDragOver:r,onDrop:c,children:s(t)},"".concat(u,",").concat(l))}))},u)}))})]}),e.showInfo?Object(a.jsx)(v,{shipsLeft:e.shipsLeft,title:e.title}):null]})},j=(n(18),function(e){var t=function(t){"New Game"===t.target.innerText?e.newGame():e.toggleRules()};return Object(a.jsxs)("nav",{className:"main-nav",children:[Object(a.jsx)("h1",{className:"nav-title",children:"BattleBoats!"}),Object(a.jsxs)("ul",{className:"nav-links",children:[Object(a.jsxs)("li",{children:[" ",Object(a.jsx)("button",{className:"nav-button",onClick:t,children:"Game Rules"})]}),Object(a.jsxs)("li",{children:[" ",Object(a.jsx)("button",{className:"nav-button",onClick:t,children:"New Game"})]})]})]})}),p=n(9),O=(n(19),n(20),function(e){var t=function(t){0===e.orientation?e.sendBoatOrientation(1):e.sendBoatOrientation(0)},n=function(t){var n=t.nativeEvent.offsetX-40;n=Math.ceil(n/40),e.sendOffset(n)},i=function(t){var n=t.nativeEvent.offsetY-40;n=Math.ceil(n/40),e.sendOffset(n)};return Object(a.jsxs)("div",{className:"boatyard",children:[Object(a.jsx)("h1",{className:"boatyard-title",children:"Place Your Boats"}),Object(a.jsx)("p",{className:"floating-tip",id:"tip1",children:"Click to rotate!"}),Object(a.jsx)("div",{className:"dock",onClick:t,children:e.boats.length>0?Object(a.jsx)("div",{className:0===e.orientation?"boat-horizontal":"boat-vertical",draggable:!0,onDragStart:function(t){0===e.orientation?n(t):i(t)},onClick:t,children:e.boats.length>0?function(){for(var t=[],n=0;n<e.boats[0].length;n++)t.push(Object(a.jsx)("div",{className:"boat"},n));return t}():null}):Object(a.jsx)("h2",{className:"dock-text",children:"All Set!"})}),e.boats.length>0?Object(a.jsx)("h2",{className:"boat-name",children:e.boats[0].name}):null,Object(a.jsx)("p",{className:"floating-tip",id:"tip2",children:"Drag and drop boats!"})]})}),x=function(e){var t=Object(i.useState)(""),n=Object(c.a)(t,2),o=n[0],s=n[1],r=Object(i.useState)(""),u=Object(c.a)(r,2),l=u[0],f=u[1],m=Object(i.useState)(""),v=Object(c.a)(m,2),j=v[0],x=v[1],k=Object(i.useState)(0),y=Object(c.a)(k,2),g=y[0],M=y[1],N=Object(i.useState)(0),S=Object(c.a)(N,2),B=S[0],C=S[1];Object(i.useEffect)((function(){R()}),[]);var w=function(){f(o.board)},R=function(){var e=new h;s(e),f(e.board);var t=[];e.boats.forEach((function(e){for(var n=0;n<e.quantity;n++)t.push(new d(e.name,e.size))})),x(t)};return Object(a.jsxs)("div",{className:"setup-container",children:[o?Object(a.jsxs)("div",{className:"setup-main-container",children:[Object(a.jsx)(O,{boats:j,orientation:g,sendBoatOrientation:function(e){M(e)},sendOffset:function(e){C(e)}}),Object(a.jsxs)("div",{className:"setup-gameboard",children:[Object(a.jsx)("p",{className:"floating-tip",id:"tip3",children:"Click on placed boats to remove them!"}),Object(a.jsx)(b,{board:l,sendCoord:function(e){var t=function(e){return 0===g?[e[0]-B,e[1]]:[e[0],e[1]-B]}(e),n=o.attemptPlacingBoat(j[0].length,t,g);if(n){o.updateBoard(n,j[0]);var a=j.slice(1);x(a),w()}},handleEdit:function(e){e&&(x([e.boat].concat(Object(p.a)(j))),o.board=o.board.map((function(t){return t.map((function(t){return t?t.boat===e.boat?null:t:null}))})),w())}})]})]}):null,Object(a.jsxs)("div",{className:"setup-button-box",children:[Object(a.jsx)("button",{className:"setup-button",onClick:function(){o.board=o.create(),o.generateRandomBoats(),x(""),w()},children:"Random Boats"}),Object(a.jsx)("button",{className:"setup-button",onClick:function(){R()},children:"Reset Board"}),j.length>0?Object(a.jsx)("button",{disabled:!0,className:"start-button",children:"Start Game"}):Object(a.jsx)("button",{onClick:function(){e.sendUserBoard(l)},className:"start-button",children:"Start Game"})]})]})},k=(n(21),function(e){return Object(a.jsx)("div",{className:"overlay",children:Object(a.jsxs)("div",{className:e.data.win?"win-box":"lose-box",children:[Object(a.jsx)("h1",{className:"gameover-heading",children:e.data.title}),Object(a.jsx)("p",{className:"gameover-message",children:e.data.message}),Object(a.jsx)("button",{className:"gameover-button",onClick:function(){e.handleNewGame()},children:"Play Again?"})]})})}),y=(n(22),n(23),function(e){return Object(a.jsx)("div",{className:"overlay",children:Object(a.jsxs)("div",{className:"rules-container",children:[Object(a.jsx)("h2",{children:"BattleBoats Rules!"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:"Place your ships manually by dragging and dropping them onto your board or by randomly placing them."}),Object(a.jsx)("li",{children:"Each turn you must guess a square on your enemy's board you think might have a ship."}),Object(a.jsx)("li",{children:"If you guess correctly, you are able to continue your attack until you miss."}),Object(a.jsx)("li",{children:"The game is over once a player successfully sinks all of their opponent's boats"})]}),Object(a.jsx)("h2",{children:"Legend"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:"This is your ship :"}),Object(a.jsx)("div",{className:"your-ship"}),Object(a.jsx)("li",{children:" A hit looks like:"}),Object(a.jsx)("div",{className:"board-hit",children:"X"}),Object(a.jsx)("li",{children:"A miss looks like :"}),Object(a.jsx)("div",{className:"board-miss",children:"~"}),Object(a.jsx)("li",{children:"This is a sunk ship:"}),Object(a.jsx)("div",{className:"is-sunk",children:"X"})]}),Object(a.jsx)("button",{onClick:function(){e.toggleRules()},children:"Got It!"})]})})});var g=function(){var e=Object(i.useState)(""),t=Object(c.a)(e,2),n=t[0],o=t[1],s=Object(i.useState)(!1),r=Object(c.a)(s,2),u=r[0],l=r[1],d=Object(i.useState)(""),h=Object(c.a)(d,2),f=h[0],v=h[1],p=Object(i.useState)(!1),O=Object(c.a)(p,2),g=O[0],M=O[1],N=Object(i.useState)(""),S=Object(c.a)(N,2),B=S[0],C=S[1],w=Object(i.useState)(""),R=Object(c.a)(w,2),A=R[0],I=R[1],L=Object(i.useState)(""),H=Object(c.a)(L,2),G=H[0],E=H[1],T=Object(i.useState)(""),D=Object(c.a)(T,2),q=D[0],P=D[1],z=Object(i.useState)(!0),Y=Object(c.a)(z,2),F=Y[0],W=Y[1],X=Object(i.useState)(!1),J=Object(c.a)(X,2),U=J[0],K=J[1],Q={win:!0,title:"Winner!",message:"You defeated the evil Battleboat threat!"},V={win:!1,title:"Defeat!",message:"You failed to overcome the impending Battleboat threat!"},Z=function e(){var t=n.compTurn();$(2),t.win?_(V):t.isHit?setTimeout((function(){e()}),1e3):W(!0)},$=function(e){1===e?(C(n.playerOne.enemyGameBoard.board),I(n.playerOne.enemyGameBoard)):(E(n.playerTwo.enemyGameBoard.board),P(n.playerTwo.enemyGameBoard))},_=function(e){v(e),l(!0)},ee=function(){M(!1),l(!1)},te=function(){K(!U)};return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(j,{newGame:ee,toggleRules:te}),U?Object(a.jsx)(y,{toggleRules:te}):null,u?Object(a.jsx)(k,{data:f,handleNewGame:ee}):null,g?Object(a.jsxs)("div",{className:"board-container",children:[Object(a.jsx)(b,{board:G,title:"Your Boats",shipsLeft:q.shipsLeft,active:!F,showInfo:!0}),Object(a.jsx)(b,{board:B,title:"Enemy Boats",handleInput:function(e){if(F){var t=n.userTurn(e);t&&($(1),t.win?_(Q):t.isHit||(W(!1),setTimeout((function(){Z()}),1e3)))}},shipsLeft:A.shipsLeft,active:!!F,showInfo:!0})]}):Object(a.jsx)(x,{sendUserBoard:function(e){!function(e){var t=new m(e);o(t),C(t.playerOne.enemyGameBoard.board),E(t.playerTwo.enemyGameBoard.board),I(t.playerOne.enemyGameBoard),P(t.playerTwo.enemyGameBoard),W(!0),M(!0),l(!1)}(e)}})]})};r.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(g,{})}),document.getElementById("root"))}],[[24,1,2]]]);
//# sourceMappingURL=main.c41002ad.chunk.js.map